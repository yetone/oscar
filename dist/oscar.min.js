!function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){t.exports={PREFIX:"oscar-"}},{}],2:[function(e){{var t=e("./libs/model").Model,n=e("./libs/builder");e("./utils")}!function(e){e.Oscar=function(){function r(){this.modelList=[],this.__init__()}var i=r.prototype;return i.__init__=function(){},i.modelRegister=function(r){if("object"!=typeof r||"string"!=typeof r.el||"object"!=typeof r.data)throw new Error("invalid model type");var i=e.document.querySelectorAll(r.el);if(!i.length)throw new Error("cannot find the element");var o,s=i[0];return o=new t({$el:s,tpl:s.innerHTML,data:r.data}),n.buildObj(o.data,o),this.modelList.push(o),o.render(),o.inited=!0,o},i.watcher=function(){var e=this;e.modelList.forEach(function(e){e.render()})},r}()}(new Function("return this;")())},{"./libs/builder":3,"./libs/model":10,"./utils":13}],3:[function(e,t){function n(e,t,n){n=n||"";var o;["push","pop","shift","unshift","splice"].forEach(function(c){e[c]=function(){var e=this.length;o=s.toArray(arguments);var a=s.toArray(arguments);if("splice"===c){var u=o.slice(2);r([u],t),o=o.slice(0,2),s.arrProto.push.apply(o,u)}else r(o,t);s.arrProto[c].apply(this,o),this.__c__.apply(c,a),r(this,t,n),t!==i&&(t.trigger("change:"+n),t.trigger("change:*"),e!==this.length&&t.trigger("change:"+s.genPath(n,"__index__")))}}),r(e,t,n)}function r(e,t,c){c=c||"";var a={};(e.__c__===i||e.__c__.constructor!==o)&&(e.__c__=new o),s.getObjKeys(e).forEach(function(o){if("__c__"!==o&&"function"!=typeof e[o]){e.__c__.set(o,e[o]);var u=s.genPath(c,o);s.isArray(e[o])&&n(e[o],t,u),s.isObj(e[o])&&r(e[o],t,u),a[o]={get:function(){return this.__c__.get(o)},set:function(e){s.isArray(e)&&n(e,t,u),s.isObj(e)&&r(e,t,u);var c=this.__c__.get(o)!==e;this.__c__.set(o,e),t!==i&&c&&(t.trigger("change:"+u),t.trigger("change:*"))}},t!==i&&t.trigger("set:"+u)}}),s.defs(e,a)}var i,o=e("./store").Store,s=e("../utils");t.exports={buildObj:r}},{"../utils":13,"./store":12}],4:[function(e,t){var n=e("./directives/if"),r=e("./directives/for"),i=e("./directives/bind"),o=e("./directives/action"),s=e("./directives/class"),c=e("../utils"),a=c.DOC,u=function(e,t,l){t=t||e.$el,l=l||e.data;var d,f,p,v,h,_;return 3===t.nodeType?c._bind(e,t,"textContent",l):(d=t.hasAttribute(e.prefix+"bind"),f=t.hasAttribute(e.prefix+"class"),p=t.hasAttribute(e.prefix+"action"),v=t.hasAttribute(e.prefix+"if"),h=t.hasAttribute(e.prefix+"for"),_=c.toArray(t.attributes),_=_.filter(function(t){return 0!==t.name.indexOf(e.prefix)}),_.forEach(function(t){c._bind(e,t,"value",l)}),h&&!t.inited?void r.compile(e,t,l):(d&&i.compile(e,t,l),f&&s.compile(e,t,l),p&&o.compile(e,t,l),v&&n.compile(e,t,l),void(a.contains(t)&&c.toArray(t.childNodes).forEach(function(t){u(e,t)}))))};t.exports={compile:u}},{"../utils":13,"./directives/action":5,"./directives/bind":6,"./directives/class":7,"./directives/for":8,"./directives/if":9}],5:[function(e,t){var n=e("../../utils");t.exports={compile:function(e,t,r){var i=t.getAttribute(e.prefix+"action"),o=/(\w+):(.*)/g.exec(i);3===o.length&&n.addEventListener(t,o[1],function(e){n.runWithEvent(o[2],r,this,e)})}}},{"../../utils":13}],6:[function(require,module,exports){var utils=require("../../utils"),undefined;module.exports={compile:function(model,$node,scope){var bind=utils.getBind($node),eventType=utils.getEventType($node),multiple=$node.hasAttribute("multiple"),bindValue=$node.getAttribute(model.prefix+"bind"),path=utils.genPath(bindValue);bind&&(multiple?(model.watch(path,function(){var $opts=utils.toArray($node.options);$opts.forEach(function($opt){$opt.selected=eval("(scope"+utils.genS(path)+".indexOf($opt.value) >= 0)")})}),eventType&&utils.addEventListener($node,eventType,function(){var $selectedOpts=utils.toArray($node.selectedOptions),acc=[],es;$selectedOpts.forEach(function(e){e.selected&&acc.push(e.value)}),es="(scope"+utils.genS(path)+" = acc)",eval(es)})):(model.watch(path,function(){$node[bind]="radio"===$node.type?eval("(scope"+utils.genS(path)+" === $node.value)"):utils.runWithScope(bindValue,scope)}),path!==path.split(".")[0]&&model.watch(path.split(".")[0],function(){$node[bind]=utils.runWithScope(bindValue,scope)}),eventType&&utils.addEventListener($node,eventType,function(){var es;es="radio"===$node.type?"(scope."+bindValue+" = this.value)":"(scope."+bindValue+" = this."+bind+")",eval(es)})))}}},{"../../utils":13}],7:[function(e,t){var n=e("../../utils");t.exports={compile:function(e,t,r){var i=t.getAttribute(e.prefix+"class"),o=e.getBindValues("{{"+i+"}}",r);e.watch(o,function(){var e=n.runWithScope("("+i+")",r);n.getObjKeys(e).forEach(function(n){e[n]===!0?t.classList.add(n):t.classList.remove(n)})})}}},{"../../utils":13}],8:[function(require,module,exports){var utils=require("../../utils"),undefined;module.exports={compile:function(model,$node,scope){function render(){var dv=eval("(scope"+utils.genS(expl[2])+")"),obj=dv;utils.isObj(dv)&&(obj=utils.getObjKeys(dv)),$node.remove(),obj.forEach(function(v,k){if(!utils.isObj(dv)||"__c__"!==v){var $node,re=/\{\{(.*?)\}\}/g,idx=k,kstr="$index";if(utils.isObj(dv)&&(idx=v,kstr="$key"),acc[idx]?$node=acc[idx].$node:($node=$tmp.cloneNode(!0),function e(t){if(3===t.nodeType)return void(t.textContent=t.textContent.replace(re,function(e,t){return t=utils.replaceEvalStr(t,expl[1],expl[2]+"['"+idx+"']"),t=utils.replaceEvalStr(t,kstr,"'"+idx+"'"),"{{"+t+"}}"}));var n=["bind","action","class","if"],r=utils.toArray(t.attributes),i=utils.toArray(t.childNodes);n.forEach(function(e){var n,r=model.prefix+e;t.hasAttribute(r)&&(n=t.getAttribute(r),n=utils.replaceEvalStr(n,expl[1],expl[2]+"['"+idx+"']"),n=utils.replaceEvalStr(n,kstr,"'"+idx+"'"),t.setAttribute(r,n))}),r=r.filter(function(e){return 0!==e.name.indexOf(model.prefix)}),r.forEach(function(e){e.value=e.value.replace(re,function(e,t){return t=utils.replaceEvalStr(t,expl[1],expl[2]+"['"+idx+"']"),t=utils.replaceEvalStr(t,kstr,"'"+idx+"'"),"{{"+t+"}}"})}),i.forEach(function(t){e(t)})}($node),acc.push({$node:$node})),!window.document.contains($node)){$ns?$pn.insertBefore($node,$ns):$ps&&$ps.nextSibling?$pn.insertBefore($node,$ps.nextSibling):$pn&&$pn.appendChild($node),$ps=$node.previousSibling,$ns=$node.nextSibling,$pn=$node.parentNode,$cns=$node.childNodes;var attrs=utils.toArray($node.attributes).filter(function(e){return 0!==e.name.indexOf(model.prefix)});attrs.forEach(function(e){utils._bind(model,e,"value",scope)}),model.watch(bindValues,function(){var dv=eval("(scope"+utils.genS(expl[2])+")"),hasMe;hasMe=utils.isObj(dv)?v in dv:k in dv,hasMe||$node.remove()}),$node.inited=!0,model.render($node)}}})}var $tmp=$node,$ps=$node.previousSibling,$ns=$node.nextSibling,$pn=$node.parentNode,$cns=$node.childNodes,exp=$node.getAttribute(model.prefix+"for"),expl=/([a-zA-Z_][a-zA-Z0-9_]*)\s+in\s+([a-zA-Z_][a-zA-Z0-9_]*)/.exec(exp),acc=[];if(expl||3===expl.length){var bindValues=model.getBindValues("{{"+expl[2]+"}}",scope);model.watch(bindValues,function(){render()})}}}},{"../../utils":13}],9:[function(e,t){var n=e("../../utils");t.exports={compile:function(e,t,r){var i=n.parseExp(t.getAttribute(e.prefix+"if")),o=t,s=t.previousSibling,c=t.nextSibling,a=t.parentNode,u=!1,l=e.getBindValues("{{"+i+"}}",r);e.watch(l,function(){if(n.runWithScope(i,r)){if(!u)return;var l=o;s&&s.nextSibling?a.insertBefore(l,s.nextSibling):c?a.insertBefore(l,c):a&&a.appendChild(l),e.render(l,null,!0),t=l,o=t,u=!1}else t.remove(),u=!0})}}},{"../../utils":13}],10:[function(e,t){var n=e("../config"),r=e("./observer"),i=e("./compiler"),o=e("../utils"),s=function(e){function t(e){return this.$el=e.$el,this.tpl=e.tpl,this.data=e.data,this.inited=e.inited||!1,this.prefix=e.prefix||n.PREFIX,t.__super__.constructor.apply(this,arguments)}o._extends(t,e);var r=t.prototype;return r.getBindValues=function(e){var t,n=e.match(/\{\{.*?\}\}/g),r=[];return n?(n.forEach(function(e){e=e.substr(2,e.length-4).trim(),t=o.parseEvalStr(e).strL,t.forEach(function(e){r.add(e);for(var t=e.split("."),n=1;n<t.length;n++)r.add(t.slice(0,-n).join("."))})}),r):r},r.render=function(e,t){i.compile(this,e,t)},t}(r.Observer);t.exports={Model:s}},{"../config":1,"../utils":13,"./compiler":4,"./observer":11}],11:[function(e,t){var n=e("../utils"),r=function(){function e(){this.eventHandlerObj={}}var t=e.prototype;return t.on=function(e,t){if(!n.isFunction(t))throw new Error("eventHandler must be a function");var r=this;return e in r.eventHandlerObj||(r.eventHandlerObj[e]=[]),r.eventHandlerObj[e].push(t),r},t.off=function(e,t){var n=this;return e in n.eventHandlerObj?(n.eventHandlerObj[e]=n.eventHandlerObj[e].filter(function(e){return e!==t}),n):n},t.trigger=function(e){var t=this,r=n.arrProto.slice(arguments,1);return e in t.eventHandlerObj&&t.eventHandlerObj[e].forEach(function(e){e&&e.apply(t,r)}),t},t.watch=function(e,t){var r=this;n.isStr(e)&&(e=e.split(" ")),n.forEach.call(e,function(e){r.on("set:"+e,t),r.on("change:"+e,t),r.on("change:"+n.genPath(e,"__index__"),t)}),t()},e}();t.exports={Observer:r}},{"../utils":13}],12:[function(e,t){var n,r=e("../utils"),i=function(){function e(){this.__c__={length:{value:0}}}var t=e.prototype;return t.set=function(e,t){var n=this,r=n.__c__.length.value;n.__c__[e]={value:t},n.setIndex(e,r),n.__c__.length.value++},t.get=function(e){var t=this,r=t.__c__[e];return!r||r.removed?n:r.value},t.delete=function(e){var t=this,n=t.__c__[e];return n?(n.removed=!0,void t.__c__.length.value--):!1},t.setIndex=function(e,t){var n=this,r=n.__c__[e];return!r||r.removed?!1:void(r.index=t)},t.getIndex=function(e){var t=this,r=t.__c__[e];return!r||r.removed?n:r.index},t.toObj=function(){var e=this,t={};for(var n in e.__c__)r.hasProp.call(e.__c__,n)&&e.__c__[n]&&!e.__c__[n].removed&&(t[n]=e.__c__[n].value);return t},t.toArray=function(){var e=this,t=e.toObj();return r.toArray(t)},t.fixIndex=function(){var e=this,t=0;r.forEach.call(e.toArray(),function(n,r){e.setIndex(r,t++)})},t.apply=function(){return"大杀器"},e}();t.exports={Store:i}},{"../utils":13}],13:[function(e,t){function n(e,t,n){function r(t){t.target=t.srcElement,t.currentTarget=e,n.handleEvent?n.handleEvent(t):n.call(e,t)}e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=function(){r(window.event)}}function r(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function i(e){return A.toString.call(e).slice(8,-1)}function o(e){return"Object"===i(e)}function s(e){return"Function"===i(e)}function c(e){return"String"===i(e)}function a(e){return E.slice.call(e)}function u(e,t,n){n=n||1;for(var r=[];t>e;e+=n)r.push(e);return r}function l(e,t){function n(){this.constructor=e}for(var r in t)j.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}function d(){return new Function("return this;")()}function f(e){for(var t,n,r,i=[],o=[],s={},c=0,a=0,u=0,l=e.length;l>u;u++){var d,f=e.charAt(u);if(a+c===0?/[a-zA-Z0-9_$]/.test(f)?(t===w&&(t=u),u===l-1&&(n=l,d=e.substr(t,n-t),i.push(d),o.push(i.join(".")),i=[],s[t]=d,t=w)):(t!==w&&(n=u,d=e.substr(t,n-t),i.push(d),s[t]=d,t=w),/[\.\[\]'"]/.test(f)||(r=i.join("."),r&&(o.push(r),i=[]))):(t!==w&&(n=u,d=e.substr(t,n-t),s[t]=d,t=w),r=i.join("."),r&&(o.push(r),i=[])),"'"===f){if("]"===e.charAt(u+1))continue;if("["===e.charAt(u-1))continue;0===a?a++:a--}if('"'===f){if("]"===e.charAt(u+1))continue;if("["===e.charAt(u-1))continue;0===c?c++:c--}}var p=i.join(".");return p&&o.push(p),s.strL=o,s}function p(e,t,n){var r=f(e),i=k(r),o=0;return i.sort(function(e,t){return(0|e)>(0|t)}),i.forEach(function(i){i=+i,isNaN(i)||r[i]===t&&(e=e.splice(i+o,t.length,n),o=o+n.length-t.length)}),e}function v(e,t){return new Function("with(this) {return ("+e+");}").call(t)}function h(e,t,n,r){return t.$this=n,t.$event=r,new Function("scope","with(scope) {return ("+e+");}").call(this,t)}function _(e,t){function n(e){return e.replace(/\[['"]/g,"[").replace(/['"]\]/g,"]").replace(/\[|\]\[|\]\./g,".").replace(/'\.'|'\.|\.'/g,".").replace(/\]$/,"").replace(/'$/,"")}return t===w?n(e):0===e.length?n(t):n(e)+"."+n(t)}function g(e){var t=e.split("."),n="";for(var r in t)t.hasOwnProperty(r)&&(n+="['"+t[r]+"']");return n}function b(e){return e.indexOf("{{")<0?void 0:e.replace(/\n/g,"").replace(/\{\{/g,"' + (").replace(/\}\}/g,") + '").replace(/^/g,"'").replace(/$/g,"'")}function x(e){return e.replace(/\sand\s/g," && ").replace(/\sor\s/g," || ")}function $(e){var t;switch(e.nodeName.toLowerCase()){case"input":switch(t="value",e.type){case"radio":case"checkbox":t="checked"}break;case"select":t="value"}return t}function m(e){var t="input";switch(e.nodeName.toLowerCase()){case"input":switch(e.type){case"checkbox":case"radio":t="change"}break;case"select":t="change"}return t}function y(e,t,n,r){var i=e.getBindValues(t[n],r),o=b(t[n]);o&&e.watch(i,function(){try{t[n]=v(o,r)}catch(e){console.log(e)}})}window=d();var w,E=window.Array.prototype,O=window.String.prototype,A=window.Object.prototype,j={}.hasOwnProperty,S=E.forEach,P=window.Object.defineProperty,L=window.Object.defineProperties,k=window.Object.keys,V=window.Array.isArray,N=!1;!function(){P||(P=function(e,t,n){return"__defineGetter__"in e?("value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e):void 0},L=function(e,t){for(var n in t)t.hasOwnProperty(n)&&P(e,n,t[n])}),V||(V=function(e){return"Array"===i(e)})}(),s(E.has)||(E.has=function(e){return-1!==this.indexOf(e)},E.add=function(e){return this.has(e)||this.push(e),this},E.remove=function(e,t){var n,r=this,i=function(){n=r.indexOf(e),r.splice(n,1)};if(!r.has(e))return r;if(t===!0){for(;r.has(e);)i();return r}return i(),r},O.splice=function(e,t,n){return n=n||"",this.substr(0,e)+n+this.substr(e+t)},A.extend=function(e){for(var t in e)this[t]=e[t]}),t.exports={arrProto:E,strProto:O,objProto:A,hasProp:j,forEach:S,def:P,defs:L,getObjKeys:k,getType:i,isObj:o,isArray:V,isFunction:s,isStr:c,toArray:a,range:u,getEvalString:b,parseEvalStr:f,replaceEvalStr:p,parseExp:x,genPath:_,genS:g,getBind:$,getEventType:m,runWithScope:v,runWithEvent:h,_bind:y,_extends:l,getWindow:d,isIE:N,addEventListener:n,removeEventListener:r,WIN:window,DOC:window.document}},{}]},{},[2]);