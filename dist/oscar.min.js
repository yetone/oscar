!function e(t,n,r){function i(c,s){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+c+"'")}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){var n=t[c][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[c].exports}for(var o="function"==typeof require&&require,c=0;c<r.length;c++)i(r[c]);return i}({1:[function(e,t){t.exports={PREFIX:"oscar-"}},{}],2:[function(e){var t=e("./libs/model").Model,n=e("./libs/store").Store,r=e("./utils");!function(e,i){e.Oscar=function(){function o(){this.modelList=[],this.__init__()}var c=o.prototype;return c.__init__=function(){},c.buildArray=function(e,t,n){n=n||"";var o,c=this;["push","pop","shift","unshift","splice"].forEach(function(s){e[s]=function(){var e=this.length;o=r.toArray(arguments);var a=r.toArray(arguments);if("splice"===s){var u=o.slice(2);c.buildObj([u],t),o=o.slice(0,2),r.arrProto.push.apply(o,u)}else c.buildObj(o,t);r.arrProto[s].apply(this,o),this.__c__.apply(s,a),c.buildObj(this,t,n),t!==i&&(t.trigger("change:"+n),t.trigger("change:*"),e!==this.length&&t.trigger("change:"+r.genPath(n,"__index__")))}}),c.buildObj(e,t,n)},c.buildObj=function(e,t,o){o=o||"";var c=this,s={};(e.__c__===i||e.__c__.constructor!==n)&&(e.__c__=new n),r.getObjKeys(e).forEach(function(n){if("__c__"!==n&&"function"!=typeof e[n]){e.__c__.set(n,e[n]);var a=r.genPath(o,n);r.isArray(e[n])&&c.buildArray(e[n],t,a),r.isObj(e[n])&&c.buildObj(e[n],t,a),s[n]={get:function(){return this.__c__.get(n)},set:function(e){r.isArray(e)&&c.buildArray(e,t,a),r.isObj(e)&&c.buildObj(e,t,a);var o=this.__c__.get(n)!==e;this.__c__.set(n,e),t!==i&&o&&(t.trigger("change:"+a),t.trigger("change:*"))}},t!==i&&t.trigger("set:"+a)}}),r.defs(e,s)},c.modelRegister=function(n){if("object"!=typeof n||"string"!=typeof n.el||"object"!=typeof n.data)throw new Error("invalid model type");var r=e.document.querySelectorAll(n.el);if(!r.length)throw new Error("cannot find the element");var i,o=r[0];return i=new t({$el:o,tpl:o.innerHTML,data:n.data}),this.buildObj(i.data,i),this.modelList.push(i),i.render(),i.inited=!0,i},c.watcher=function(){var e=this;e.modelList.forEach(function(e){e.render()})},o}()}(new Function("return this;")())},{"./libs/model":9,"./libs/store":11,"./utils":12}],3:[function(e,t){var n=e("./directives/if"),r=e("./directives/for"),i=e("./directives/bind"),o=e("./directives/action"),c=e("./directives/class"),s=e("../utils"),a=s.DOC,u=function(e,t,l){t=t||e.$el,l=l||e.data;var d,p,f,h,v,_;return 3===t.nodeType?s._bind(e,t,"textContent",l):(d=t.hasAttribute(e.prefix+"bind"),p=t.hasAttribute(e.prefix+"class"),f=t.hasAttribute(e.prefix+"action"),h=t.hasAttribute(e.prefix+"if"),v=t.hasAttribute(e.prefix+"for"),_=s.toArray(t.attributes),_=_.filter(function(t){return 0!==t.name.indexOf(e.prefix)}),_.forEach(function(t){s._bind(e,t,"value",l)}),v&&!t.inited?void r.compile(e,t,l):(d&&i.compile(e,t,l),p&&c.compile(e,t,l),f&&o.compile(e,t,l),h&&n.compile(e,t,l),void(a.contains(t)&&s.toArray(t.childNodes).forEach(function(t){u(e,t)}))))};t.exports={compile:u}},{"../utils":12,"./directives/action":4,"./directives/bind":5,"./directives/class":6,"./directives/for":7,"./directives/if":8}],4:[function(e,t){var n=e("../../utils");t.exports={compile:function(e,t,r){var i=t.getAttribute(e.prefix+"action"),o=/(\w+):(.*)/g.exec(i);3===o.length&&t.addEventListener(o[1],function(e){n.runWithEvent(o[2],r,this,e)})}}},{"../../utils":12}],5:[function(require,module,exports){var utils=require("../../utils");module.exports={compile:function(model,$node,scope){var bind=utils.getBind($node),eventType=utils.getEventType($node),multiple=$node.hasAttribute("multiple"),bindValue=$node.getAttribute(model.prefix+"bind"),path=utils.genPath(bindValue);bind&&(multiple?(model.watch(path,function(){var $opts=utils.toArray($node.options);$opts.forEach(function($opt){$opt.selected=eval("(scope"+utils.genS(path)+".indexOf($opt.value) >= 0)")})}),eventType&&$node.addEventListener(eventType,function(){var $selectedOpts=utils.toArray($node.selectedOptions),acc=[],es;$selectedOpts.forEach(function(e){e.selected&&acc.push(e.value)}),es="(scope"+utils.genS(path)+" = acc)",eval(es)})):(model.watch(path,function(){$node[bind]="radio"===$node.type?eval("(scope"+utils.genS(path)+" === $node.value)"):utils.runWithScope(bindValue,scope)}),path!==path.split(".")[0]&&model.watch(path.split(".")[0],function(){$node[bind]=utils.runWithScope(bindValue,scope)}),eventType&&$node.addEventListener(eventType,function(){var es;es="radio"===$node.type?"(scope."+bindValue+" = this.value)":"(scope."+bindValue+" = this."+bind+")",eval(es)})))}}},{"../../utils":12}],6:[function(e,t){var n=e("../../utils");t.exports={compile:function(e,t,r){var i=t.getAttribute(e.prefix+"class"),o=e.getBindValues("{{"+i+"}}",r);e.watch(o,function(){var e=n.runWithScope("("+i+")",r);n.getObjKeys(e).forEach(function(n){e[n]===!0?t.classList.add(n):t.classList.remove(n)})})}}},{"../../utils":12}],7:[function(require,module,exports){var utils=require("../../utils");module.exports={compile:function(model,$node,scope){function render(){var dv=eval("(scope"+utils.genS(expl[2])+")"),obj=dv;utils.isObj(dv)&&(obj=utils.getObjKeys(dv)),$node.remove(),obj.forEach(function(v,k){if(!utils.isObj(dv)||"__c__"!==v){var $node,re=/\{\{(.*?)\}\}/g,idx=k,kstr="$index";if(utils.isObj(dv)&&(idx=v,kstr="$key"),acc[idx]?$node=acc[idx].$node:($node=$tmp.cloneNode(!0),function e(t){if(3===t.nodeType)return void(t.textContent=t.textContent.replace(re,function(e,t){return t=utils.replaceEvalStr(t,expl[1],expl[2]+"['"+idx+"']"),t=utils.replaceEvalStr(t,kstr,"'"+idx+"'"),"{{"+t+"}}"}));var n=["bind","action","class","if"],r=utils.toArray(t.attributes),i=utils.toArray(t.childNodes);n.forEach(function(e){var n,r=model.prefix+e;t.hasAttribute(r)&&(n=t.getAttribute(r),n=utils.replaceEvalStr(n,expl[1],expl[2]+"['"+idx+"']"),n=utils.replaceEvalStr(n,kstr,"'"+idx+"'"),t.setAttribute(r,n))}),r=r.filter(function(e){return 0!==e.name.indexOf(model.prefix)}),r.forEach(function(e){e.value=e.value.replace(re,function(e,t){return t=utils.replaceEvalStr(t,expl[1],expl[2]+"['"+idx+"']"),t=utils.replaceEvalStr(t,kstr,"'"+idx+"'"),"{{"+t+"}}"})}),i.forEach(function(t){e(t)})}($node),acc.push({$node:$node})),!window.document.contains($node)){$ns?$pn.insertBefore($node,$ns):$ps&&$ps.nextSibling?$pn.insertBefore($node,$ps.nextSibling):$pn&&$pn.appendChild($node),$ps=$node.previousSibling,$ns=$node.nextSibling,$pn=$node.parentNode,$cns=$node.childNodes;var attrs=utils.toArray($node.attributes).filter(function(e){return 0!==e.name.indexOf(model.prefix)});attrs.forEach(function(e){utils._bind(model,e,"value",scope)}),model.watch(bindValues,function(){var dv=eval("(scope"+utils.genS(expl[2])+")"),hasMe;hasMe=utils.isObj(dv)?v in dv:k in dv,hasMe||$node.remove()}),$node.inited=!0,model.render($node)}}})}var $tmp=$node,$ps=$node.previousSibling,$ns=$node.nextSibling,$pn=$node.parentNode,$cns=$node.childNodes,exp=$node.getAttribute(model.prefix+"for"),expl=/([a-zA-Z_][a-zA-Z0-9_]*)\s+in\s+([a-zA-Z_][a-zA-Z0-9_]*)/.exec(exp),acc=[];if(expl||3===expl.length){var bindValues=model.getBindValues("{{"+expl[2]+"}}",scope);model.watch(bindValues,function(){render()})}}}},{"../../utils":12}],8:[function(e,t){var n=e("../../utils");t.exports={compile:function(e,t,r){var i=n.parseExp(t.getAttribute(e.prefix+"if")),o=t,c=t.previousSibling,s=t.nextSibling,a=t.parentNode,u=!1,l=e.getBindValues("{{"+i+"}}",r);e.watch(l,function(){if(n.runWithScope(i,r)){if(!u)return;var l=o;c&&c.nextSibling?a.insertBefore(l,c.nextSibling):s?a.insertBefore(l,s):a&&a.appendChild(l),e.render(l,null,!0),t=l,o=t,u=!1}else t.remove(),u=!0})}}},{"../../utils":12}],9:[function(e,t){var n=e("../config"),r=e("./observer"),i=e("./compiler"),o=e("../utils"),c=function(e){function t(e){return this.$el=e.$el,this.tpl=e.tpl,this.data=e.data,this.inited=e.inited||!1,this.prefix=e.prefix||n.PREFIX,t.__super__.constructor.apply(this,arguments)}o._extends(t,e);var r=t.prototype;return r.getBindValues=function(e){var t,n=e.match(/\{\{.*?\}\}/g),r=[];return n?(n.forEach(function(e){e=e.substr(2,e.length-4).trim(),t=o.parseEvalStr(e).strL,t.forEach(function(e){r.add(e);for(var t=e.split("."),n=1;n<t.length;n++)r.add(t.slice(0,-n).join("."))})}),r):r},r.render=function(e,t){i.compile(this,e,t)},t}(r.Observer);t.exports={Model:c}},{"../config":1,"../utils":12,"./compiler":3,"./observer":10}],10:[function(e,t){var n=e("../utils"),r=function(){function e(){this.eventHandlerObj={}}var t=e.prototype;return t.on=function(e,t){if(!n.isFunction(t))throw new Error("eventHandler must be a function");var r=this;return e in r.eventHandlerObj||(r.eventHandlerObj[e]=[]),r.eventHandlerObj[e].push(t),r},t.off=function(e,t){var n=this;return e in n.eventHandlerObj?(n.eventHandlerObj[e]=n.eventHandlerObj[e].filter(function(e){return e!==t}),n):n},t.trigger=function(e){var t=this,r=n.arrProto.slice(arguments,1);return e in t.eventHandlerObj&&t.eventHandlerObj[e].forEach(function(e){e&&e.apply(t,r)}),t},t.watch=function(e,t){var r=this;n.isStr(e)&&(e=e.split(" ")),n.forEach.call(e,function(e){r.on("set:"+e,t),r.on("change:"+e,t),r.on("change:"+n.genPath(e,"__index__"),t)}),t()},e}();t.exports={Observer:r}},{"../utils":12}],11:[function(e,t){var n=e("../utils"),r=function(){function e(){this.__c__={length:{value:0}}}var t=e.prototype;return t.set=function(e,t){var n=this,r=n.__c__.length.value;n.__c__[e]={value:t},n.setIndex(e,r),n.__c__.length.value++},t.get=function(e){var t=this,n=t.__c__[e];return!n||n.removed?void 0:n.value},t.delete=function(e){var t=this,n=t.__c__[e];return n?(n.removed=!0,void t.__c__.length.value--):!1},t.setIndex=function(e,t){var n=this,r=n.__c__[e];return!r||r.removed?!1:void(r.index=t)},t.getIndex=function(e){var t=this,n=t.__c__[e];return!n||n.removed?void 0:n.index},t.toObj=function(){var e=this,t={};for(var r in e.__c__)n.hasProp.call(e.__c__,r)&&e.__c__[r]&&!e.__c__[r].removed&&(t[r]=e.__c__[r].value);return t},t.toArray=function(){var e=this,t=e.toObj();return n.toArray(t)},t.fixIndex=function(){var e=this,t=0;n.forEach.call(e.toArray(),function(n,r){e.setIndex(r,t++)})},t.apply=function(){return"大杀器"},e}();t.exports={Store:r}},{"../utils":12}],12:[function(e,t){function n(e){try{return e&&e.constructor===window.Object}catch(t){return"object"==typeof e&&!P(e)}}function r(e){try{return e&&e.constructor===window.Function}catch(t){return"function"==typeof e}}function i(e){try{return e&&e.constructor===window.String}catch(t){return"string"==typeof e}}function o(e){return x.slice.call(e)}function c(e,t){function n(){this.constructor=e}for(var r in t)E.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}function s(){return new Function("return this;")()}function a(e){for(var t,n,r,i=[],o=[],c={},s=0,a=0,u=0,l=e.length;l>u;u++){var d,p=e.charAt(u);if(a+s===0?/[a-zA-Z0-9_$]/.test(p)?(void 0===t&&(t=u),u===l-1&&(n=l,d=e.substr(t,n-t),i.push(d),o.push(i.join(".")),c[t]=d,t=void 0)):void 0!==t&&(n=u,d=e.substr(t,n-t),i.push(d),/[\.\[\]'"]/.test(p)||(r=i.join("."),r&&(o.push(r),i=[])),c[t]=d,t=void 0):(void 0!==t&&(n=u,d=e.substr(t,n-t),c[t]=d,t=void 0),r=i.join("."),r&&(o.push(r),i=[])),"'"===p){if("]"===e.charAt(u+1))continue;if("["===e.charAt(u-1))continue;0===a?a++:a--}if('"'===p){if("]"===e.charAt(u+1))continue;if("["===e.charAt(u-1))continue;0===s?s++:s--}}var f=i.join(".");return f&&o.push(f),c.strL=o,c}function u(e,t,n){var r=a(e),i=Object.keys(r),o=0;return i.sort(function(e,t){return(0|e)>(0|t)}),i.forEach(function(i){i=+i,isNaN(i)||r[i]===t&&(e=e.splice(i+o,t.length,n),o=o+n.length-t.length)}),e}function l(e,t){return new Function("with(this) {return ("+e+");}").call(t)}function d(e,t,n,r){return t.$this=n,t.$event=r,new Function("scope","with(scope) {return ("+e+");}").call(this,t)}function p(e,t){function n(e){return e.replace(/\[['"]/g,"[").replace(/['"]\]/g,"]").replace(/\[|\]\[|\]\./g,".").replace(/'\.'|'\.|\.'/g,".").replace(/\]$/,"").replace(/'$/,"")}return void 0===t?n(e):0===e.length?n(t):n(e)+"."+n(t)}function f(e){var t=e.split("."),n="";for(var r in t)t.hasOwnProperty(r)&&(n+="['"+t[r]+"']");return n}function h(e){return e.indexOf("{{")<0?void 0:e.replace(/\n/g,"").replace(/\{\{/g,"' + (").replace(/\}\}/g,") + '").replace(/^/g,"'").replace(/$/g,"'")}function v(e){return e.replace(/\sand\s/g," && ").replace(/\sor\s/g," || ")}function _(e){var t;switch(e.nodeName.toLowerCase()){case"input":switch(t="value",e.type){case"radio":case"checkbox":t="checked"}break;case"select":t="value"}return t}function b(e){var t="input";switch(e.nodeName.toLowerCase()){case"input":switch(e.type){case"checkbox":case"radio":t="change"}break;case"select":t="change"}return t}function g(e,t,n,r){var i=e.getBindValues(t[n],r),o=h(t[n]);o&&e.watch(i,function(){try{t[n]=l(o,r)}catch(e){console.log(e)}})}var x=window.Array.prototype,y=window.String.prototype,$=window.Object.prototype,m=window.Event.prototype,w=window.Element.prototype,E={}.hasOwnProperty,O=x.forEach,j=window.Object.defineProperty,A=window.Object.defineProperties,S=window.Object.keys,P=window.Array.isArray;!function(){w.addEventListener||(w.addEventListener=function(e,t){var n=this,r=function(e){e.target=e.srcElement,e.currentTarget=n,t.handleEvent?t.handleEvent(e):t.call(n,e)};n.attachEvent("on"+e,r)},w.removeEventListener=function(e,t){this.detachEvent("on"+e,t)}),j||(j=function(e,t,n){return"__defineGetter__"in e?("value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e):void 0},A=function(e,t){for(var n in t)t.hasOwnProperty(n)&&j(e,n,t[n])}),P||(P=function(e){try{return"object"==typeof e&&o(e).length===e.length}catch(t){return!1}})}(),x.has=function(e){return-1!==this.indexOf(e)},x.add=function(e){return this.has(e)||this.push(e),this},x.remove=function(e,t){var n,r=this,i=function(){n=r.indexOf(e),r.splice(n,1)};if(!r.has(e))return r;if(t===!0){for(;r.has(e);)i();return r}return i(),r},y.splice=function(e,t,n){return this.substr(0,e)+n+this.substr(e+t)},$.extend=function(e){for(var t in e)this[t]=e[t]};var k=s();t.exports={arrProto:x,strProto:y,objProto:$,eventProto:m,elProto:w,hasProp:E,forEach:O,def:j,defs:A,getObjKeys:S,isObj:n,isArray:P,isFunction:r,isStr:i,toArray:o,getEvalString:h,parseEvalStr:a,replaceEvalStr:u,parseExp:v,genPath:p,genS:f,getBind:_,getEventType:b,_extends:c,runWithScope:l,runWithEvent:d,getWindow:s,_bind:g,WIN:k,DOC:k.document}},{}]},{},[2]);